"use strict";(self.webpackChunkcompose_destinations_docs=self.webpackChunkcompose_destinations_docs||[]).push([[199],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return m}});var a=t(7294);function i(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){i(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)t=r[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var l=a.createContext({}),p=function(e){var n=a.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},u=function(e){var n=p(e.components);return a.createElement(l.Provider,{value:n},e.children)},c={inlineCode:"code",wrapper:function(e){var n=e.children;return a.createElement(a.Fragment,{},n)}},d=a.forwardRef((function(e,n){var t=e.components,i=e.mdxType,r=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(t),m=i,h=d["".concat(l,".").concat(m)]||d[m]||c[m]||r;return t?a.createElement(h,o(o({ref:n},u),{},{components:t})):a.createElement(h,o({ref:n},u))}));function m(e,n){var t=arguments,i=n&&n.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:i,o[1]=s;for(var p=2;p<r;p++)o[p]=t[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7615:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return s},contentTitle:function(){return l},metadata:function(){return p},toc:function(){return u},default:function(){return d}});var a=t(7462),i=t(3366),r=(t(7294),t(3905)),o=["components"],s={sidebar_position:9},l="Deep links",p={unversionedId:"deeplinks",id:"deeplinks",title:"Deep links",description:"Deep links to screen Composables are supported with Compose Destinations.",source:"@site/docs/deeplinks.md",sourceDirName:".",slug:"/deeplinks",permalink:"/deeplinks",editUrl:"https://github.com/raamcosta/compose-destinations-docs/edit/main/docusaurus/docs/deeplinks.md",tags:[],version:"current",sidebarPosition:9,frontMatter:{sidebar_position:9},sidebar:"tutorialSidebar",previous:{title:"Styles and Animations",permalink:"/styles-and-animations"},next:{title:"Code generation configs",permalink:"/codegenconfigs"}},u=[{value:"Screens with mandatory Parcelable/Serializable navigation arguments",id:"screens-with-mandatory-parcelableserializable-navigation-arguments",children:[],level:2},{value:"Arrays / ArrayLists arguments on deep links",id:"arrays--arraylists-arguments-on-deep-links",children:[],level:2}],c={toc:u};function d(e){var n=e.components,t=(0,i.Z)(e,o);return(0,r.kt)("wrapper",(0,a.Z)({},c,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"deep-links"},"Deep links"),(0,r.kt)("p",null,"Deep links to screen Composables are supported with Compose Destinations."),(0,r.kt)("p",null,"You can define deep links to a destination like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'@Destination(\n  route = "user",\n  deepLinks = [\n    DeepLink(\n      uriPattern = "https://myapp.com/user/{id}"\n    )\n  ]\n)\n@Composable\nfun UserScreen(\n  navigator: DestinationsNavigator,\n  id: Int\n)\n')),(0,r.kt)("p",null,"You can also use the placeholder suffix ",(0,r.kt)("inlineCode",{parentName:"p"},"FULL_ROUTE_PLACEHOLDER")," in your ",(0,r.kt)("inlineCode",{parentName:"p"},"uriPattern"),". In the code generation process, it will be replaced with the full route of the destination which contains all the destination arguments. So, for example, this would result in the same ",(0,r.kt)("inlineCode",{parentName:"p"},"uriPattern")," as the above example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'@Destination(\n  route = "user",\n  deepLinks = [\n    DeepLink(\n      uriPattern = "https://myapp.com/$FULL_ROUTE_PLACEHOLDER"\n    )\n  ]\n)\n@Composable\nfun UserScreen(\n  navigator: DestinationsNavigator,\n  id: Int\n)\n')),(0,r.kt)("p",null,"Besides ",(0,r.kt)("inlineCode",{parentName:"p"},"uriPattern"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"DeepLink")," class has other ways of defining it like ",(0,r.kt)("inlineCode",{parentName:"p"},"action")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"mimetype"),". You can read more in ",(0,r.kt)("a",{parentName:"p",href:"https://developer.android.com/jetpack/compose/navigation#deeplinks"},"official documentation"),"."),(0,r.kt)("h2",{id:"screens-with-mandatory-parcelableserializable-navigation-arguments"},"Screens with mandatory Parcelable/Serializable navigation arguments"),(0,r.kt)("p",null,"If you have a screen that declares a mandatory navigation argument of ",(0,r.kt)("inlineCode",{parentName:"p"},"Parcelable"),"/",(0,r.kt)("inlineCode",{parentName:"p"},"Serializable"),"/",(0,r.kt)("a",{parentName:"p",href:"https://github.com/Kotlin/kotlinx.serialization"},"@kotlinx.serialization.Serializable")," type (or Array of those), you need to be explicit about how that type is represented in the deep link route you are expecting.\nFor this, you need to use ",(0,r.kt)("inlineCode",{parentName:"p"},"@NavTypeSerializer")," annotation in a class that implements either ",(0,r.kt)("inlineCode",{parentName:"p"},"DestinationsNavTypeSerializer<YOUR_NAV_ARG_TYPE>"),"."),(0,r.kt)("p",null,"Example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},"@Parcelize\ndata class Things(\n    val thingOne: String,\n    val thingTwo: String\n) : Parcelable\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'@NavTypeSerializer\nclass ThingsNavTypeSerializer : DestinationsNavTypeSerializer<Things> {\n\n    override fun toRouteString(value: Things): String {\n        return "${value.thing1};${value.thing2}"\n    }\n\n    override fun fromRouteString(routeStr: String): Things {\n        val things = routeStr.split(";")\n        return Things(things[0], things[1])\n    }\n}\n')),(0,r.kt)("p",null,"After this, you'd be able to use a deep link for this destination:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'@Destination(\n    deepLinks = [\n        DeepLink(uriPattern = "https://myapp.com/things_screen/{things}")\n    ]\n)\n@Composable\nfun ThingsScreen(\n    things: Things\n) {\n    //...\n}\n')),(0,r.kt)("p",null,"And the link that would lead users to this screen would be ",(0,r.kt)("inlineCode",{parentName:"p"},"https://myapp.com/things_screen/thingOne;thingTwo"),". Given the above ",(0,r.kt)("inlineCode",{parentName:"p"},"@NavTypeSerializer")," annotated class, the navigation argument received would be created by calling the ",(0,r.kt)("inlineCode",{parentName:"p"},"fromRouteString")," method (so in the end, it would be ",(0,r.kt)("inlineCode",{parentName:"p"},'Things("thingOne", "thingTwo")'),")."),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"}," For ",(0,r.kt)("a",{parentName:"p",href:"destination-arguments/navigation-arguments#custom-navigation-argument-types"},"custom navigation types"),", since they are so only because you defined a ",(0,r.kt)("inlineCode",{parentName:"p"},"@NavTypeSerializer"),", the string representation in the deep link will need to match what is expected there."))),(0,r.kt)("h2",{id:"arrays--arraylists-arguments-on-deep-links"},"Arrays / ArrayLists arguments on deep links"),(0,r.kt)("p",null,'Array and ArrayList navigation arguments are represented on deep links as comma separated values. If each of those values needs to be "URI encoded" to be safely used on URI, then your commas need to be encoded in the same way twice. This is the only way we can safely parse the value from the route without considering other possible commas that could otherwise be present on one of the values.'),(0,r.kt)("p",null,"So:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"If your app is the one prepraring the URI for the deep link")," (example: to pass to a notification) you can use the corresponding NavType ",(0,r.kt)("inlineCode",{parentName:"p"},"serializeValue")," method to get a value for a specific argument that the same NavType will be able to parse.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("strong",{parentName:"p"},"If the deep link is prepared from outside the app"),', remember that the commas need to be "doubly encoded", i.e, you need to separate values with "%252C", for the following types:')),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},(0,r.kt)("inlineCode",{parentName:"p"},"Array<String>"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"ArrayList<String>"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Array")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"ArrayList")," of ",(0,r.kt)("inlineCode",{parentName:"p"},"Parcelable"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"Serializable"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"@Serializable")," and  ",(0,r.kt)("a",{parentName:"p",href:"destination-arguments/navigation-arguments#custom-navigation-argument-types"},"custom nav types"),"."))),(0,r.kt)("p",null,"Taking the same example as above but changing the argument to array:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-kotlin"},'@Destination(\n    deepLinks = [\n        DeepLink(uriPattern = "https://myapp.com/things_screen/{things}")\n    ]\n)\n@Composable\nfun ThingsScreen(\n    things: Array<Things>\n) {\n    //...\n}\n')),(0,r.kt)("p",null,"Now, a deep link for this screen (also considering the above ",(0,r.kt)("inlineCode",{parentName:"p"},"@NavTypeSerializer"),") would be something like:"),(0,r.kt)("p",null,(0,r.kt)("inlineCode",{parentName:"p"},"https://myapp.com/things_screen/thingOne;thingTwo%252CthingThree;thingFour")),(0,r.kt)("p",null,"And this would result in the app navigating to the above ",(0,r.kt)("inlineCode",{parentName:"p"},"ThingsScreen")," with a navigation argument equal to the result of ",(0,r.kt)("inlineCode",{parentName:"p"},'arrayOf(Things("thingOne", "thingTwo"), Things("thingThree", "thingFour"))'),"."))}d.isMDXComponent=!0}}]);